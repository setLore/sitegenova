<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>M&D</title>
</head>
<body>
	<header class="site-header">
		<a href="index.html" class="logo-link" aria-label="M&D home">
			<img src="logo.png" alt="M&D logo" class="logo">
		</a>
		<nav id="site-nav" class="nav-buttons" role="navigation">
			<a class="nav-link" href="index.html">Home</a>
			<a class="nav-link" href="shop.html">Shop</a>
			<a class="nav-link" href="about.html">About</a>
		</nav>

		<div class="header-actions">
			<button class="menu-toggle" aria-controls="site-nav" aria-expanded="false" aria-label="Open menu">
				<span class="bar"></span>
				<span class="bar"></span>
				<span class="bar"></span>
			</button>

			<a class="cart-button" href="cart.html" aria-label="Open cart">
				<img src="cart.png" alt="" class="cart-icon" aria-hidden="true">
				<span class="cart-count" aria-hidden="true">0</span>
			</a>
		</div>
	</header>
	<footer class="site-footer">
		Copyright M&D
	</footer>

	<style>
		/* Responsive/site-wide improvements replacing the old style block */

		/* Box sizing + base */
		*, *::before, *::after { box-sizing: border-box; }
		html { -webkit-text-size-adjust: 100%; }
		body {
			margin: 0;
			background: #181818;
			color: #fff;
			/* Make room for the fixed footer on wide screens; scales with viewport */
			padding-bottom: clamp(72px, 10vh, 120px);
			font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
			font-size: clamp(14px, 1.6vw, 18px);
			line-height: 1.35;
		}

		/* Header */
		.site-header {
			width: 100%;
			background: #222;
			color: #fff;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: clamp(12px, 3.5vw, 32px) 0;
			border-radius: 0 0 32px 32px;
			border-bottom: 2px solid #333;
			box-shadow: 0 2px 8px rgba(0,0,0,0.08);
			position: relative;
			z-index: 101;
			gap: clamp(12px, 2.5vw, 32px);
		}

		.logo {
			/* scales between 40px and 56px */
			height: clamp(40px, 6vw, 56px);
			margin-right: clamp(12px, 3vw, 32px);
			margin-left: clamp(12px, 3vw, 32px);
			max-width: 40%;
			object-fit: contain;
		}

		.nav-buttons {
			display: flex;
			flex: 1;
			justify-content: center;
			gap: clamp(12px, 3vw, 48px);
			flex-wrap: wrap; /* allow wrapping on narrow viewports */
			padding: 0 8px;
		}

		.nav-buttons a.nav-link{
			background: #333;
			color: #fff;
			text-decoration: none;
			padding: clamp(8px, 2vw, 16px) clamp(12px, 3vw, 32px);
			font-size: clamp(14px, 1.8vw, 20px);
			border-radius: 8px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			transition: background .2s;
			white-space: nowrap;
		}
		.nav-buttons a.nav-link:hover{ background: #444; }

		/* Footer */
		.site-footer {
			width: 100%;
			background: #222;
			color: #fff;
			text-align: center;
			padding: clamp(12px, 2.5vw, 24px) 0;
			position: fixed;
			left: 0;
			bottom: 0;
			border-radius: 32px 32px 0 0;
			border-top: 2px solid #333;
			box-shadow: 0 -2px 8px rgba(0,0,0,0.08);
			font-size: clamp(14px, 1.4vw, 18px);
			z-index: 100;
		}

		/* hamburger button (hidden by default on larger screens) */
		.menu-toggle{
			display: none;
			background: transparent;
			border: none;
			width: 48px;              /* increase hit area to meet touch targets */
			height: 48px;             /* increase hit area */
			padding: 6px;
			cursor: pointer;
			align-self: center;
			margin-right: clamp(12px, 3vw, 32px);
			position: relative;
			z-index: 140;             /* sit above the sliding nav so it's always clickable */
			touch-action: manipulation;
		}
		.menu-toggle .bar{
			display: block;
			height: 2px;
			width: 22px;
			background: #fff;
			margin: 4px auto;
			transition: transform .22s ease, opacity .18s ease;
			border-radius: 2px;
		}

		/* transform hamburger into X when open */
		.menu-toggle[aria-expanded="true"] .bar:nth-child(1){
			transform: translateY(6px) rotate(45deg);
		}
		.menu-toggle[aria-expanded="true"] .bar:nth-child(2){
			opacity: 0;
		}
		.menu-toggle[aria-expanded="true"] .bar:nth-child(3){
			transform: translateY(-6px) rotate(-45deg);
		}

		/* define a header height variable used on small screens */
		.site-header { --header-height: clamp(56px, 10vw, 72px); }

		/* Small screens: top fixed header with logo left and hamburger right,
		   nav slides down below the header when opened */
		@media (max-width: 600px) {
			/* show hamburger on narrow screens */
			.menu-toggle{ display: block; }

			.site-header{
				/* fixed top bar (was bottom previously) */
				flex-direction: row;
				align-items: center;
				justify-content: space-between;
				height: var(--header-height);
				padding: 0 12px;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				border-radius: 0 0 12px 12px;
				box-shadow: 0 6px 18px rgba(0,0,0,0.2);
				z-index: 120;
			}

			.logo {
				/* keep logo left */
				margin: 0;
				margin-left: 12px;
				height: clamp(36px, 8vw, 48px);
				max-width: 50%;
			}

			/* move hamburger to the right */
			.menu-toggle {
				margin: 0;
				margin-right: 12px;
				align-self: center;
			}

			/* nav becomes a sliding panel below the top header */
			.nav-buttons{
				position: fixed;
				left: 12px;
				right: 12px;
				top: calc(var(--header-height) + 12px);
				display: flex;
				flex-direction: column;
				background: #222;
				padding: 12px;
				gap: 8px;
				border-radius: 12px;
				z-index: 130;
				max-height: 60vh;
				overflow: auto;
				/* start hidden by translating up, animate into view when .open */
				transform: translateY(-120%);
				transition: transform .28s ease, opacity .2s ease;
				opacity: 0;
				box-shadow: 0 8px 24px rgba(0,0,0,0.35);

				/* when closed, do not receive pointer events (prevents invisible blockers) */
				pointer-events: none;
			}
			.nav-buttons.open{
				transform: translateY(0);
				opacity: 1;
				/* allow interaction when open */
				pointer-events: auto;
			}

			/* ensure the header sits above the nav when closed so hamburger is reachable */
			.site-header { z-index: 135; }

			.nav-buttons button {
				width: 100%;
				max-width: none;
				margin: 0;
				padding: clamp(10px, 2.6vw, 14px);
				font-size: clamp(14px, 3vw, 16px);
			}

			/* move header-actions to the right edge and tighten spacing */
			.header-actions{
				margin-left: 0; /* header uses space-between so keep actions on the right */
				margin-right: 12px;
				gap: 8px;
				/* ensure header-actions remains a flex container for ordering */
				display: flex;
				align-items: center;
			}

			/* swap visual order on mobile: show cart before hamburger */
			.cart-button { order: 1; }
			.menu-toggle { order: 2; }

			/* cart button should be slightly smaller on mobile but still touch-friendly */
			.cart-button{
				padding: 8px;
				min-width: 44px;
				min-height: 44px;
			}

			/* keep footer fixed at bottom (do not make it static) */

			/* make room for the fixed top header so content isn't hidden */
			body { padding-top: calc(var(--header-height) + 16px); padding-bottom: clamp(72px, 10vh, 120px); }
		}

		/* new: header actions (hamburger + cart) */
		.header-actions{
			display: flex;
			align-items: center;
			gap: clamp(8px, 2.2vw, 16px);
			/* place actions to the far right on wide screens */
			margin-left: auto;
			margin-right: clamp(12px, 3vw, 32px);
		}

		/* cart button styling */
		.cart-button{
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
			background: #333;
			color: #fff;
			border: none;
			padding: 10px;
			border-radius: 10px;
			cursor: pointer;
			min-width: 44px; /* meet touch target */
			min-height: 44px;
			position: relative;
		}
		.cart-button .cart-icon{
			display: block;
			width: 20px;
			height: 20px;
			object-fit: contain;
		}
		.cart-button:hover{ background:#444; }

		/* small badge for cart count */
		.cart-count{
			position: absolute;
			top: 6px;
			right: 6px;
			min-width: 12px;
			height: 12px;
			padding: 0 4px;
			border-radius: 999px;
			background: #ff4d4f;
			color: #fff;
			font-size: 12px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			line-height: 1;
		}

		/* keep hamburger button hidden on larger screens (unchanged behavior) */
		.menu-toggle{
			display: none;
			background: transparent;
			border: none;
			width: 48px;              /* increase hit area to meet touch targets */
			height: 48px;             /* increase hit area */
			padding: 6px;
			cursor: pointer;
			align-self: center;
			margin-right: clamp(12px, 3vw, 32px);
			position: relative;
			z-index: 140;             /* sit above the sliding nav so it's always clickable */
			touch-action: manipulation;
		}
		.menu-toggle .bar{
			display: block;
			height: 2px;
			width: 22px;
			background: #fff;
			margin: 4px auto;
			transition: transform .22s ease, opacity .18s ease;
			border-radius: 2px;
		}

		/* transform hamburger into X when open */
		.menu-toggle[aria-expanded="true"] .bar:nth-child(1){
			transform: translateY(6px) rotate(45deg);
		}
		.menu-toggle[aria-expanded="true"] .bar:nth-child(2){
			opacity: 0;
		}
		.menu-toggle[aria-expanded="true"] .bar:nth-child(3){
			transform: translateY(-6px) rotate(-45deg);
		}

		/* define a header height variable used on small screens */
		.site-header { --header-height: clamp(56px, 10vw, 72px); }

		/* Small screens: top fixed header with logo left and hamburger right,
		   nav slides down below the header when opened */
		@media (max-width: 600px) {
			/* show hamburger on narrow screens */
			.menu-toggle{ display: block; }

			.site-header{
				/* fixed top bar (was bottom previously) */
				flex-direction: row;
				align-items: center;
				justify-content: space-between;
				height: var(--header-height);
				padding: 0 12px;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				border-radius: 0 0 12px 12px;
				box-shadow: 0 6px 18px rgba(0,0,0,0.2);
				z-index: 120;
			}

			.logo {
				/* keep logo left */
				margin: 0;
				margin-left: 12px;
				height: clamp(36px, 8vw, 48px);
				max-width: 50%;
			}

			/* move hamburger to the right */
			.menu-toggle {
				margin: 0;
				margin-right: 12px;
				align-self: center;
			}

			/* nav becomes a sliding panel below the top header */
			.nav-buttons{
				position: fixed;
				left: 12px;
				right: 12px;
				top: calc(var(--header-height) + 12px);
				display: flex;
				flex-direction: column;
				background: #222;
				padding: 12px;
				gap: 8px;
				border-radius: 12px;
				z-index: 130;
				max-height: 60vh;
				overflow: auto;
				/* start hidden by translating up, animate into view when .open */
				transform: translateY(-120%);
				transition: transform .28s ease, opacity .2s ease;
				opacity: 0;
				box-shadow: 0 8px 24px rgba(0,0,0,0.35);

				/* when closed, do not receive pointer events (prevents invisible blockers) */
				pointer-events: none;
			}
			.nav-buttons.open{
				transform: translateY(0);
				opacity: 1;
				/* allow interaction when open */
				pointer-events: auto;
			}

			/* ensure the header sits above the nav when closed so hamburger is reachable */
			.site-header { z-index: 135; }

			.nav-buttons button {
				width: 100%;
				max-width: none;
				margin: 0;
				padding: clamp(10px, 2.6vw, 14px);
				font-size: clamp(14px, 3vw, 16px);
			}

			/* move header-actions to the right edge and tighten spacing */
			.header-actions{
				margin-left: 0; /* header uses space-between so keep actions on the right */
				margin-right: 12px;
				gap: 8px;
				/* ensure header-actions remains a flex container for ordering */
				display: flex;
				align-items: center;
			}

			/* swap visual order on mobile: show cart before hamburger */
			.cart-button { order: 1; }
			.menu-toggle { order: 2; }

			/* cart button should be slightly smaller on mobile but still touch-friendly */
			.cart-button{
				padding: 8px;
				min-width: 44px;
				min-height: 44px;
			}

			/* keep footer fixed at bottom (do not make it static) */

			/* make room for the fixed top header so content isn't hidden */
			body { padding-top: calc(var(--header-height) + 16px); padding-bottom: clamp(72px, 10vh, 120px); }
		}
	</style>
<!-- replace/add script: menu toggle + cart badge helpers -->
<script>
	// unified site script (index.html)
	(function(){
		const PAGE_SITE_TOKEN = 'site-v2';
		(function ensureSiteToken(){
			const stored = localStorage.getItem('md_site_start_token');
			if (stored !== PAGE_SITE_TOKEN) {
				localStorage.removeItem('md_cart');
				localStorage.setItem('md_site_start_token', PAGE_SITE_TOKEN);
				localStorage.setItem('md_cart_sync', Date.now().toString());
			}
		})();

		function getCart() {
			try { return JSON.parse(localStorage.getItem('md_cart') || '[]'); } catch(e) { return []; }
		}
		function updateCartCount() {
			const cart = getCart();
			const totalQty = cart.reduce((s,i) => s + (i.qty||1), 0);
			document.querySelectorAll('.cart-count').forEach(el => el.textContent = totalQty);
		}

		(function bindMenu(){
			const toggle = document.querySelector('.menu-toggle');
			const nav = document.getElementById('site-nav');
			if (!toggle || !nav) return;
			toggle.addEventListener('click', (e) => {
				e.stopPropagation();
				const isOpen = toggle.getAttribute('aria-expanded') === 'true';
				toggle.setAttribute('aria-expanded', String(!isOpen));
				toggle.setAttribute('aria-label', !isOpen ? 'Close menu' : 'Open menu');
				nav.classList.toggle('open', !isOpen);
			});
			nav.addEventListener('click', (e) => e.stopPropagation());
			window.addEventListener('resize', () => {
				if (window.innerWidth > 600) {
					toggle.setAttribute('aria-expanded','false');
					nav.classList.remove('open');
				}
			});
			document.addEventListener('click', (e) => {
				if (window.innerWidth <= 600 && nav.classList.contains('open')) {
					if (!nav.contains(e.target) && !toggle.contains(e.target)) {
						toggle.setAttribute('aria-expanded','false');
						nav.classList.remove('open');
					}
				}
			});
		})();

		window.addEventListener('storage', (ev) => {
			if (ev.key === 'md_cart' || ev.key === 'md_cart_sync') updateCartCount();
		});

		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', updateCartCount);
		} else updateCartCount();
	})();
</script>
</body>
</html>
