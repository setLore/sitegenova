<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>M&D</title>
	<link rel="stylesheet" href="css/index.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	
</head>
<body>
	<header class="site-header">
		<a href="index.html" class="logo-link" aria-label="M&D home">
			<img src="logo.png" alt="M&D logo" class="logo">
		</a>
		<nav id="site-nav" class="nav-buttons" role="navigation">
			<a class="nav-link" href="index.html">Home</a>
			<div class="nav-item-with-dropdown">
				<a class="nav-link" href="shop.html">Shop</a>
				<div class="nav-dropdown" role="menu" aria-label="Shop categories">
					<a class="nav-dropdown-item" href="shop.html?category=stage-one" role="menuitem">Stage 1</a>
					<a class="nav-dropdown-item" href="shop.html?category=stage-two" role="menuitem">Stage 2</a>
				</div>
			</div>
			<a class="nav-link" href="about.html">About</a>
		</nav>

		<div class="header-actions">
			<button class="menu-toggle" aria-controls="site-nav" aria-expanded="false" aria-label="Open menu">
				<span class="bar"></span>
				<span class="bar"></span>
				<span class="bar"></span>
			</button>

			<a class="cart-button" href="cart.html" aria-label="Open cart">
				<i class="bi bi-cart cart-icon" aria-hidden="true"></i>
				<span class="cart-count" aria-hidden="true">0</span>
			</a>
		</div>
	</header>

	<!-- Video background with hero overlayed -->
	<div class="hero-video-wrap">
		<video id="bg-video" autoplay muted loop playsinline aria-hidden="true" preload="auto" poster="">
			<source src="sait-a.mp4" type="video/mp4">
		</video>
		<section class="hero-section" role="region" aria-label="Hero">
			<div class="hero-content">
				<h1 class="hero-title">Find the best part for your automobile</h1>
				<p class="hero-sub">Fast, easy, and cheap</p>
				<a class="hero-cta" href="shop.html">View Parts</a>
			</div>
		</section>
	</div>

	<footer class="site-footer">
		<div class="site-footer-inner">
			<span class="footer-left">Â© M&amp;D 2025</span>
			<div class="social-buttons" role="group" aria-label="Social links">
				<a class="social-button social-instagram" href="https://www.instagram.com/825a14" target="_blank" rel="noopener noreferrer" aria-label="Open Instagram">
					<i class="bi bi-instagram" aria-hidden="true"></i>
				</a>
				<a class="social-button social-tiktok" href="https://www.tiktok.com/@00_dimov" target="_blank" rel="noopener noreferrer" aria-label="Open TikTok">
					<i class="bi bi-tiktok" aria-hidden="true"></i>
				</a>
				<a class="social-button social-facebook" href="https://www.facebook.com/" target="_blank" rel="noopener noreferrer" aria-label="Open Facebook">
					<i class="bi bi-facebook" aria-hidden="true"></i>
				</a>
			</div>
		</div>
	</footer>

	<!-- Review Section BELOW hero, with bg image and left-aligned carousel -->
	<section class="review-section">
		<div class="review-bg"></div>
		<div class="review-carousel-container">
			<div class="review-carousel" aria-label="Customer Reviews">
				<div class="review-rating">
					<span class="star full">&#9733;</span>
					<span class="star full">&#9733;</span>
					<span class="star full">&#9733;</span>
					<span class="star full">&#9733;</span>
					<span class="star empty">&#9733;</span>
					<span class="rating-text">4/5</span>
				</div>
				<div class="review-slider">
					<button class="review-arrow left" aria-label="Previous review">&#8592;</button>
					<div class="review-content">
						<!-- Reviews will be injected here by JS -->
					</div>
					<button class="review-arrow right" aria-label="Next review">&#8594;</button>
				</div>
			</div>
		</div>
	</section>

	<!-- replace/add script: menu toggle + cart badge helpers -->
	<script>
		// unified site script (index.html)
		(function(){
			const PAGE_SITE_TOKEN = 'site-v2';
			(function ensureSiteToken(){
				const stored = localStorage.getItem('md_site_start_token');
				if (stored !== PAGE_SITE_TOKEN) {
					localStorage.removeItem('md_cart');
					localStorage.setItem('md_site_start_token', PAGE_SITE_TOKEN);
					localStorage.setItem('md_cart_sync', Date.now().toString());
				}
			})();

			function getCart() {
				try { return JSON.parse(localStorage.getItem('md_cart') || '[]'); } catch(e) { return []; }
			}
			function updateCartCount() {
				const cart = getCart();
				const totalQty = cart.reduce((s,i) => s + (i.qty||1), 0);
				document.querySelectorAll('.cart-count').forEach(el => el.textContent = totalQty);
			}

			(function bindMenu(){
				const toggle = document.querySelector('.menu-toggle');
				const nav = document.getElementById('site-nav');
				if (!toggle || !nav) return;
				toggle.addEventListener('click', (e) => {
					e.stopPropagation();
					const isOpen = toggle.getAttribute('aria-expanded') === 'true';
					toggle.setAttribute('aria-expanded', String(!isOpen));
					toggle.setAttribute('aria-label', !isOpen ? 'Close menu' : 'Open menu');
					nav.classList.toggle('open', !isOpen);
				});
				nav.addEventListener('click', (e) => e.stopPropagation());
				window.addEventListener('resize', () => {
					if (window.innerWidth > 600) {
						toggle.setAttribute('aria-expanded','false');
						nav.classList.remove('open');
					}
				});
				document.addEventListener('click', (e) => {
					if (window.innerWidth <= 600 && nav.classList.contains('open')) {
						if (!nav.contains(e.target) && !toggle.contains(e.target)) {
							toggle.setAttribute('aria-expanded','false');
							nav.classList.remove('open');
						}
					}
				});
			})();

			window.addEventListener('storage', (ev) => {
				if (ev.key === 'md_cart' || ev.key === 'md_cart_sync') updateCartCount();
			});

			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', updateCartCount);
			} else updateCartCount();
		})();

		// Review carousel logic
		(function(){
			const reviews = [
				{
					text: "Great service and fast shipping. The part fit perfectly and was much cheaper than anywhere else.",
					name: "Alex P.",
					date: "May 2024",
					avatar: "https://randomuser.me/api/portraits/men/32.jpg",
					rating: 4
				},
				{
					text: "I was skeptical at first but the quality is top notch. Customer support was helpful and responsive.",
					name: "Maria L.",
					date: "April 2024",
					avatar: "https://randomuser.me/api/portraits/women/65.jpg",
					rating: 5
				},
				{
					text: "Easy to find what I needed and checkout was a breeze. Will definitely shop here again.",
					name: "Chris D.",
					date: "March 2024",
					avatar: "https://randomuser.me/api/portraits/men/76.jpg",
					rating: 5
				}
				,
				{
					text: "Fast delivery and excellent packaging. Part matched description and arrived earlier than expected.",
					name: "Jordan K.",
					date: "June 2024",
					avatar: "https://randomuser.me/api/portraits/men/45.jpg",
					rating: 4
				},
				{
					text: "Good value for the price. Support answered my questions quickly and installation was straightforward.",
					name: "Sofia R.",
					date: "June 2024",
					avatar: "https://randomuser.me/api/portraits/women/48.jpg",
					rating: 4
				}
			];
			let idx = 0;
			const reviewContent = document.querySelector('.review-content');
			const reviewRating = document.querySelector('.review-rating');
			const leftBtn = document.querySelector('.review-arrow.left');
			const rightBtn = document.querySelector('.review-arrow.right');
			
			function renderStars(rating) {
				let starsHtml = '';
				for (let i = 1; i <= 5; i++) {
					starsHtml += `<span class="star ${i <= rating ? 'full' : 'empty'}">&#9733;</span>`;
				}
				return starsHtml + `<span class="rating-text">${rating}/5</span>`;
			}
			
			function renderReview(i) {
				const r = reviews[i];
				reviewContent.style.animation = 'none';
				reviewRating.style.animation = 'none';
				
				setTimeout(() => {
					reviewRating.innerHTML = renderStars(r.rating);
					reviewContent.innerHTML = `
						<div class="review-text">"${r.text}"</div>
						<div class="review-person">
							<img class="review-avatar" src="${r.avatar}" alt="${r.name}">
							<div>
								<span class="review-name">${r.name}</span>
								<span class="review-date">${r.date}</span>
							</div>
						</div>
					`;
					reviewContent.style.animation = 'reviewSlide 0.4s ease-out';
					reviewRating.style.animation = 'reviewSlide 0.4s ease-out';
				}, 0);
			}
			
			leftBtn.addEventListener('click', () => {
				idx = (idx + reviews.length - 1) % reviews.length;
				renderReview(idx);
			});
			rightBtn.addEventListener('click', () => {
				idx = (idx + 1) % reviews.length;
				renderReview(idx);
			});
			renderReview(idx);
		})();
	</script>
</body>
</html>
