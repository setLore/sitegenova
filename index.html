<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>M&D</title>
</head>
<body>
	<header class="site-header">
		<a href="index.html" class="logo-link" aria-label="M&D home">
			<img src="logo.png" alt="M&D logo" class="logo">
		</a>
		<nav id="site-nav" class="nav-buttons" role="navigation">
			<a class="nav-link" href="index.html">Home</a>
			<a class="nav-link" href="shop.html">Shop</a>
			<a class="nav-link" href="about.html">About</a>
		</nav>

		<div class="header-actions">
			<button class="menu-toggle" aria-controls="site-nav" aria-expanded="false" aria-label="Open menu">
				<span class="bar"></span>
				<span class="bar"></span>
				<span class="bar"></span>
			</button>

			<a class="cart-button" href="cart.html" aria-label="Open cart">
				<img src="cart.png" alt="" class="cart-icon" aria-hidden="true">
				<span class="cart-count" aria-hidden="true">0</span>
			</a>
		</div>
	</header>

	<!-- Video background with hero overlayed -->
	<div class="hero-video-wrap">
		<video id="bg-video" autoplay muted loop playsinline aria-hidden="true" preload="auto" poster="">
			<source src="sait-a.mp4" type="video/mp4">
		</video>
		<section class="hero-section" role="region" aria-label="Hero">
			<div class="hero-content">
				<h1 class="hero-title">Find the best part for your automobile</h1>
				<p class="hero-sub">Fast, easy, and cheap</p>
				<a class="hero-cta" href="shop.html">View Parts</a>
			</div>
		</section>
	</div>

	<footer class="site-footer">
		<div class="site-footer-inner">
			<span class="footer-left">Â© M&amp;D 2025</span>
			<div class="social-buttons" role="group" aria-label="Social links">
				<a class="social-button social-instagram" href="https://www.instagram.com/825a14" target="_blank" rel="noopener noreferrer" aria-label="Open Instagram">
					<!-- Instagram SVG -->
					<svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
						<rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.6"></rect>
						<path d="M8 11.8a4 4 0 1 0 8 0 4 4 0 0 0-8 0z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
						<circle cx="18" cy="6" r="0.7" fill="currentColor"></circle>
					</svg>
				</a>
				<a class="social-button social-tiktok" href="https://www.tiktok.com/@00_dimov" target="_blank" rel="noopener noreferrer" aria-label="Open TikTok">
					<!-- simple TikTok-style SVG (note/music) -->
					<svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
						<path d="M12 3v9.2A3.8 3.8 0 1 0 16.8 16V8h3V3h-7z" fill="currentColor"/>
					</svg>
				</a>
				<a class="social-button social-facebook" href="https://www.facebook.com/" target="_blank" rel="noopener noreferrer" aria-label="Open Facebook">
					<!-- Facebook SVG -->
					<svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg">
						<path d="M15 3h3v4h-3c-1.657 0-3 1.343-3 3v2H9v4h3v7h4v-7h3l1-4h-4v-1c0-.551.449-1 1-1z" fill="currentColor"/>
					</svg>
				</a>
			</div>
		</div>
	</footer>

	<!-- Review Section BELOW hero, with bg image and left-aligned carousel -->
	<section class="review-section">
		<div class="review-bg"></div>
		<div class="review-carousel-container">
			<div class="review-carousel" aria-label="Customer Reviews">
				<div class="review-rating">
					<span class="star full">&#9733;</span>
					<span class="star full">&#9733;</span>
					<span class="star full">&#9733;</span>
					<span class="star full">&#9733;</span>
					<span class="star empty">&#9733;</span>
					<span class="rating-text">4/5</span>
				</div>
				<div class="review-slider">
					<button class="review-arrow left" aria-label="Previous review">&#8592;</button>
					<div class="review-content">
						<!-- Reviews will be injected here by JS -->
					</div>
					<button class="review-arrow right" aria-label="Next review">&#8594;</button>
				</div>
			</div>
		</div>
	</section>

	<style>
		/* Responsive/site-wide improvements replacing the old style block */

		/* Box sizing + base */
		*, *::before, *::after { box-sizing: border-box; }
		html { -webkit-text-size-adjust: 100%; }
		body {
			margin: 0;
			background: #181818;
			color: #fff;
			/* Make room for the fixed footer on wide screens; scales with viewport */
			padding-bottom: clamp(72px, 10vh, 120px);
			font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
			font-size: clamp(14px, 1.6vw, 18px);
			line-height: 1.35;
		}

		/* Header */
		.site-header {
			width: 100%;
			background: #222;
			color: #fff;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: clamp(12px, 3.5vw, 15px) 0;
			border-radius: 0 0 32px 32px;
			border-bottom: 2px solid #333;
			box-shadow: 0 2px 8px rgba(0,0,0,0.08);
			position: relative;
			z-index: 101;
			gap: clamp(12px, 2.5vw, 32px);
		}

		.logo {
			/* scales between 40px and 56px */
			margin-right: clamp(12px, 3vw, 32px);
			margin-left: clamp(12px, 3vw, 32px);
			max-width: 40%;
			object-fit: contain;
		}

		.nav-buttons {
			display: flex;
			/* center nav independently of logo and header actions */
			position: absolute;
			left: 50%;
			transform: translateX(-50%);
			flex: 0 1 auto;
			justify-content: center;
			gap: clamp(12px, 3vw, 48px);
			flex-wrap: wrap; /* allow wrapping on narrow viewports */
			padding: 0 8px;
			z-index: 110;
		}

		.nav-buttons a.nav-link{
			background: #333;
			color: #fff;
			text-decoration: none;
			padding: clamp(8px, 2vw, 10px) clamp(12px, 3vw, 32px);
			font-size: clamp(14px, 1.8vw, 20px);
			border-radius: 8px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			transition: background .2s;
			white-space: nowrap;
		}
		.nav-buttons a.nav-link:hover{ background: #444; }

		/* Footer */
		.site-footer {
			width: 100%;
			background: #222;
			color: #fff;
			position: fixed;
			left: 0;
			bottom: 0;
			border-radius: 32px 32px 0 0;
			border-top: 2px solid #333;
			box-shadow: 0 -2px 8px rgba(0,0,0,0.08);
			z-index: 100;

			/* layout */
			display: flex;
			align-items: center;
			justify-content: center; /* fallback for very narrow screens */
			padding: clamp(10px, 2vw, 18px);
			font-size: clamp(14px, 1.4vw, 18px);
		}
		.site-footer .site-footer-inner {
			width: 100%;
			max-width: 1100px;
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 12px;
			padding: 0 12px;
		}
		.footer-left {
			text-align: left;
			color: #fff;
		}
		.social-buttons {
			display: inline-flex;
			align-items: center;
			gap: 8px;
		}
		.social-button{
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: transparent;
			border: 1px solid transparent;
			padding: 8px;
			border-radius: 8px;
			text-decoration: none;
			min-width: 44px;
			min-height: 44px;
		}
		.social-button svg { display: block; width: 20px; height: 20px; color: currentColor; }
		.social-button:focus {
			outline: 3px solid rgba(255,122,24,0.18);
			outline-offset: 2px;
		}
		.social-button:hover svg { filter: brightness(1.05); }

		/* simple brand colors */
		.social-button.social-instagram { color: #ff7a18; }
		.social-button.social-tiktok { color: #00f2ea; }
		.social-button.social-facebook { color: #1877F2; }

		@media (max-width: 600px) {
			.site-footer {
				padding: clamp(8px, 2.5vw, 12px);
			}
			.site-footer .site-footer-inner {
				padding: 0 8px;
			}
			.footer-left { font-size: 13px; }
			.social-buttons { gap: 6px; }
			.social-button { padding: 6px; min-width: 40px; min-height: 40px; }
		}

		/* hamburger button (hidden by default on larger screens) */
		.menu-toggle{
			display: none;
			background: transparent;
			border: none;
			width: 48px;              /* increase hit area to meet touch targets */
			height: 48px;             /* increase hit area */
			padding: 6px;
			cursor: pointer;
			align-self: center;
			margin-right: clamp(12px, 3vw, 32px);
			position: relative;
			z-index: 140;             /* sit above the sliding nav so it's always clickable */
			touch-action: manipulation;
		}
		.menu-toggle .bar{
			display: block;
			height: 2px;
			width: 22px;
			background: #fff;
			margin: 4px auto;
			transition: transform .22s ease, opacity .18s ease;
			border-radius: 2px;
		}

		/* transform hamburger into X when open */
		.menu-toggle[aria-expanded="true"] .bar:nth-child(1){
			transform: translateY(6px) rotate(45deg);
		}
		.menu-toggle[aria-expanded="true"] .bar:nth-child(2){
			opacity: 0;
		}
		.menu-toggle[aria-expanded="true"] .bar:nth-child(3){
			transform: translateY(-6px) rotate(-45deg);
		}

		/* define a header height variable used on small screens */
		.site-header { --header-height: clamp(40px, 10vw, 72px); }

		/* Small screens: top fixed header with logo left and hamburger right,
		   nav slides down below the header when opened */
		@media (max-width: 600px) {
			/* show hamburger on narrow screens */
			.menu-toggle{ display: block; }

			.site-header{
				/* fixed top bar (was bottom previously) */
				flex-direction: row;
				align-items: center;
				justify-content: space-between;
				height: var(--header-height);
				padding: 0 12px;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				border-radius: 0 0 12px 12px;
				box-shadow: 0 6px 18px rgba(0,0,0,0.2);
				z-index: 120;
			}

			.logo {
				/* keep logo left */
				margin: 0;
				margin-left: 12px;
				height: clamp(36px, 8vw, 48px);
				max-width: 50%;
			}

			/* move hamburger to the right */
			.menu-toggle {
				margin: 0;
				margin-right: 12px;
				align-self: center;
			}

			/* nav becomes a sliding panel below the top header */
			.nav-buttons{
				position: fixed;
				left: 12px;
				right: 12px;
				top: calc(var(--header-height) + 12px);
				display: flex;
				flex-direction: column;
				background: #222;
				padding: 12px;
				gap: 8px;
				border-radius: 12px;
				z-index: 130;
				max-height: 60vh;
				overflow: auto;
				/* start hidden by translating up, animate into view when .open */
				transform: translateY(-120%);
				transition: transform .28s ease, opacity .2s ease;
				opacity: 0;
				box-shadow: 0 8px 24px rgba(0,0,0,0.35);

				/* when closed, do not receive pointer events (prevents invisible blockers) */
				pointer-events: none;
			}
			.nav-buttons.open{
				transform: translateY(0);
				opacity: 1;
				/* allow interaction when open */
				pointer-events: auto;
			}

			/* ensure the header sits above the nav when closed so hamburger is reachable */
			.site-header { z-index: 135; }

			.nav-buttons button {
				width: 100%;
				max-width: none;
				margin: 0;
				padding: clamp(10px, 2.6vw, 14px);
				font-size: clamp(14px, 3vw, 16px);
			}

			/* move header-actions to the right edge and tighten spacing */
			.header-actions{
				margin-left: 0; /* header uses space-between so keep actions on the right */
				margin-right: 12px;
				gap: 8px;
				/* ensure header-actions remains a flex container for ordering */
				display: flex;
				align-items: center;
			}

			/* swap visual order on mobile: show cart before hamburger */
			.cart-button { order: 1; }
			.menu-toggle { order: 2; }

			/* cart button should be slightly smaller on mobile but still touch-friendly */
			.cart-button{
				padding: 8px;
				min-width: 44px;
				min-height: 44px;
			}

			/* keep footer fixed at bottom (do not make it static) */

			/* make room for the fixed top header so content isn't hidden */
			body { padding-top: calc(var(--header-height) + 16px); padding-bottom: clamp(72px, 10vh, 120px); }
		}

		/* new: header actions (hamburger + cart) */
		.header-actions{
			display: flex;
			align-items: center;
			gap: clamp(8px, 2.2vw, 16px);
			/* place actions to the far right on wide screens */
			margin-left: auto;
			margin-right: clamp(12px, 3vw, 32px);
		}

		/* cart button styling */
		.cart-button{
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
			background: #333;
			color: #fff;
			border: none;
			padding: 10px;
			border-radius: 10px;
			cursor: pointer;
			min-width: 44px; /* meet touch target */
			min-height: 44px;
			position: relative;
		}
		.cart-button .cart-icon{
			display: block;
			width: 20px;
			height: 20px;
			object-fit: contain;
		}
		.cart-button:hover{ background:#444; }

		/* small badge for cart count */
		.cart-count{
			position: absolute;
			top: 6px;
			right: 6px;
			min-width: 12px;
			height: 12px;
			padding: 0 4px;
			border-radius: 999px;
			background: #ff4d4f;
			color: #fff;
			font-size: 12px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			line-height: 1;
		}

		/* keep hamburger button hidden on larger screens (unchanged behavior) */
		.menu-toggle{
			display: none;
			background: transparent;
			border: none;
			width: 48px;              /* increase hit area to meet touch targets */
			height: 48px;             /* increase hit area */
			padding: 6px;
			cursor: pointer;
			align-self: center;
			margin-right: clamp(12px, 3vw, 32px);
			position: relative;
			z-index: 140;             /* sit above the sliding nav so it's always clickable */
			touch-action: manipulation;
		}
		.menu-toggle .bar{
			display: block;
			height: 2px;
			width: 22px;
			background: #fff;
			margin: 4px auto;
			transition: transform .22s ease, opacity .18s ease;
			border-radius: 2px;
		}

		/* transform hamburger into X when open */
		.menu-toggle[aria-expanded="true"] .bar:nth-child(1){
			transform: translateY(6px) rotate(45deg);
		}
		.menu-toggle[aria-expanded="true"] .bar:nth-child(2){
			opacity: 0;
		}
		.menu-toggle[aria-expanded="true"] .bar:nth-child(3){
			transform: translateY(-6px) rotate(-45deg);
		}

		/* define a header height variable used on small screens */
		.site-header { --header-height: clamp(40px, 10vw, 72px); }

		/* Small screens: top fixed header with logo left and hamburger right,
		   nav slides down below the header when opened */
		@media (max-width: 600px) {
			/* show hamburger on narrow screens */
			.menu-toggle{ display: block; }

			.site-header{
				/* fixed top bar (was bottom previously) */
				flex-direction: row;
				align-items: center;
				justify-content: space-between;
				height: var(--header-height);
				padding: 0 12px;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				border-radius: 0 0 12px 12px;
				box-shadow: 0 6px 18px rgba(0,0,0,0.2);
				z-index: 120;
			}

			.logo {
				/* keep logo left */
				margin: 0;
				margin-left: 12px;
				height: clamp(36px, 8vw, 48px);
				max-width: 50%;
			}

			/* move hamburger to the right */
			.menu-toggle {
				margin: 0;
				margin-right: 12px;
				align-self: center;
			}

			/* nav becomes a sliding panel below the top header */
			.nav-buttons{
				position: fixed;
				left: 12px;
				right: 12px;
				top: calc(var(--header-height) + 12px);
				display: flex;
				flex-direction: column;
				background: #222;
				padding: 12px;
				gap: 8px;
				border-radius: 12px;
				z-index: 130;
				max-height: 60vh;
				overflow: auto;
				/* start hidden by translating up, animate into view when .open */
				transform: translateY(-120%);
				transition: transform .28s ease, opacity .2s ease;
				opacity: 0;
				box-shadow: 0 8px 24px rgba(0,0,0,0.35);

				/* when closed, do not receive pointer events (prevents invisible blockers) */
				pointer-events: none;
			}
			.nav-buttons.open{
				transform: translateY(0);
				opacity: 1;
				/* allow interaction when open */
				pointer-events: auto;
			}

			/* ensure the header sits above the nav when closed so hamburger is reachable */
			.site-header { z-index: 135; }

			.nav-buttons button {
				width: 100%;
				max-width: none;
				margin: 0;
				padding: clamp(10px, 2.6vw, 14px);
				font-size: clamp(14px, 3vw, 16px);
			}

			/* move header-actions to the right edge and tighten spacing */
			.header-actions{
				margin-left: 0; /* header uses space-between so keep actions on the right */
				margin-right: 12px;
				gap: 8px;
				/* ensure header-actions remains a flex container for ordering */
				display: flex;
				align-items: center;
			}

			/* swap visual order on mobile: show cart before hamburger */
			.cart-button { order: 1; }
			.menu-toggle { order: 2; }

			/* cart button should be slightly smaller on mobile but still touch-friendly */
			.cart-button{
				padding: 8px;
				min-width: 44px;
				min-height: 44px;
			}

			/* keep footer fixed at bottom (do not make it static) */

			/* make room for the fixed top header so content isn't hidden */
			body { padding-top: calc(var(--header-height) + 16px); padding-bottom: clamp(72px, 10vh, 120px); }
		}

		.hero-video-wrap {
			position: relative;
			width: 100vw;
			max-width: 100%;
			height: min(60vh, 480px);
			min-height: 220px;
			overflow: hidden;
			display: flex;
			align-items: stretch;
			justify-content: center;
		}
		#bg-video {
			display: block;
			width: 100vw;
			height: 100%;
			object-fit: cover;
			object-position: center;
			opacity: 0.5;
			background: transparent;
			margin: 0 auto;
			position: absolute;
			top: 0; left: 0; right: 0; bottom: 0;
			z-index: 0;
			pointer-events: none;
		}
		.hero-section {
			position: absolute;
			top: 0; left: 0; right: 0; bottom: 0;
			z-index: 1;
			width: 100vw;
			height: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			pointer-events: none;
		}
		.hero-content {
			pointer-events: auto;
			text-align: center;
			color: #fff;
			padding: clamp(1rem, 4vw, 2.5rem);
			max-width: 90ch;
			margin: 0 2vw;
			background: rgba(0,0,0,0.18);
			border-radius: 12px;
			backdrop-filter: blur(6px);
			box-shadow: 0 6px 18px rgba(0,0,0,0.18);
		}
		.hero-title{
			margin: 0 0 .5rem 0;
			font-size: clamp(28px, 6vw, 56px);
			line-height: 1.02;
			letter-spacing: -0.01em;
			text-shadow: 0 6px 18px rgba(0,0,0,0.6);
			font-weight: 700;
		}
		.hero-sub{
			margin: 0 0 1rem 0;
			font-size: clamp(14px, 3vw, 20px);
			opacity: 0.95;
		}
		.hero-cta{
			display: inline-block;
			padding: .65rem 1.1rem;
			border-radius: 10px;
			background: #ff7a18;
			color: #fff;
			text-decoration: none;
			font-weight: 600;
			font-size: clamp(14px, 2.2vw, 18px);
			box-shadow: 0 6px 18px rgba(0,0,0,0.35);
		}
		.hero-cta:focus, .hero-cta:hover{ filter: brightness(.95); }

		@media (max-width: 900px) {
			.hero-video-wrap {
				height: min(36vh, 240px);
				min-height: 120px;
			}
		}
		@media (max-width: 700px) {
			.hero-video-wrap {
				height: min(32vh, 180px);
				min-height: 100px;
				max-height: none;
			}
			.hero-content { padding: 0.7rem 0.3rem; }
		}
		@media (max-width: 500px) {
			.hero-content {
				padding: 0.7rem 0.3rem;
			}
		}

		/* Review Section Styles */
		.review-section {
			position: relative;
			width: 100vw;
			min-height: 320px;
			margin: 0;
			padding: 0;
			overflow: hidden;
			display: flex;
			align-items: stretch;
			justify-content: flex-start;
		}
		.review-bg {
			position: absolute;
			inset: 0;
			width: 100vw;
			height: 100%;
			background: url('reviewbg.jpeg') center center/cover no-repeat;
			opacity: 0.85;
			z-index: 0;
			transition: background-size 0.2s;
		}
		.review-carousel-container {
			position: relative;
			z-index: 1;
			display: flex;
			align-items: flex-start;
			justify-content: flex-start;
			width: 100vw;
			min-height: 320px;
		}
		.review-carousel {
			max-width: 420px;
			width: min(90vw, 420px);
			margin: clamp(1.2rem, 6vw, 3.5rem) 0 clamp(1.2rem, 6vw, 3.5rem) clamp(2vw, 6vw, 6vw);
			background: rgba(30,30,30,0.92);
			border-radius: 14px;
			box-shadow: 0 4px 18px rgba(0,0,0,0.18);
			padding: clamp(1rem, 3vw, 1.5rem) clamp(0.5rem, 2vw, 1.2rem) clamp(1rem, 2vw, 1.2rem) clamp(0.5rem, 2vw, 1.2rem);
			text-align: left;
			position: relative;
		}
		.review-rating {
			display: flex;
			align-items: center;
			gap: 2px;
			margin-bottom: 1rem;
			font-size: clamp(1.1rem, 2.5vw, 1.35rem);
		}
		.star {
			color: #FFD700;
			font-size: 1.5em;
			line-height: 1;
			display: inline-block;
			position: relative;
		}
		.star.empty {
			color: #333;
		}
		.rating-text {
			color: #fff;
			font-size: 1.1em;
			margin-left: 0.5em;
			opacity: 0.85;
		}
		.review-slider {
			display: flex;
			align-items: center;
			gap: 0.5em;
		}
		.review-arrow {
			background: none;
			border: none;
			color: #ff7a18;
			font-size: 2em;
			cursor: pointer;
			padding: 0 0.3em;
			transition: color 0.18s;
			user-select: none;
		}
		.review-arrow:focus,
		.review-arrow:hover {
			color: #ffb347;
		}
		.review-content {
			flex: 1 1 0;
			min-width: 0;
			padding: 0 0.5em;
			text-align: left;
		}
		.review-text {
			font-size: clamp(1em, 2.5vw, 1.08em);
			color: #eee;
			margin-bottom: 0.7em;
			line-height: 1.4;
		}
		.review-person {
			display: flex;
			align-items: center;
			gap: 0.7em;
		}
		.review-avatar {
			width: 38px;
			height: 38px;
			border-radius: 50%;
			object-fit: cover;
			background: #444;
			border: 2px solid #ff7a18;
		}
		.review-name {
			font-weight: 600;
			color: #fff;
			font-size: 1em;
		}
		.review-date {
			color: #bbb;
			font-size: 0.95em;
			margin-left: 0.3em;
		}

		@media (max-width: 900px) {
			.review-carousel {
				margin-left: 2vw;
			}
		}
		@media (max-width: 700px) {
			.hero-video-wrap {
				height: min(36vh, 240px);
				min-height: 120px;
				max-height: 240px;
			}
			.hero-section {
				min-height: 100px;
			}
			.review-section,
			.review-carousel-container {
				min-height: 220px;
			}
			.review-carousel {
				margin: 1.2rem 0 1.2rem 1vw;
				padding: 1rem 0.5rem 1rem 0.5rem;
			}
			.review-content { padding: 0 0.2em; }
		}
		@media (max-width: 500px) {
			.hero-content {
				padding: 0.7rem 0.3rem;
			}
			.review-carousel {
				max-width: 98vw;
				width: 98vw;
				margin-left: 1vw;
				margin-right: 1vw;
			}
			.review-bg {
				background-position: center center;
				background-size: cover;
			}
		}
		/* ...existing code... */
	</style>
<!-- replace/add script: menu toggle + cart badge helpers -->
<script>
	// unified site script (index.html)
	(function(){
		const PAGE_SITE_TOKEN = 'site-v2';
		(function ensureSiteToken(){
			const stored = localStorage.getItem('md_site_start_token');
			if (stored !== PAGE_SITE_TOKEN) {
				localStorage.removeItem('md_cart');
				localStorage.setItem('md_site_start_token', PAGE_SITE_TOKEN);
				localStorage.setItem('md_cart_sync', Date.now().toString());
			}
		})();

		function getCart() {
			try { return JSON.parse(localStorage.getItem('md_cart') || '[]'); } catch(e) { return []; }
		}
		function updateCartCount() {
			const cart = getCart();
			const totalQty = cart.reduce((s,i) => s + (i.qty||1), 0);
			document.querySelectorAll('.cart-count').forEach(el => el.textContent = totalQty);
		}

		(function bindMenu(){
			const toggle = document.querySelector('.menu-toggle');
			const nav = document.getElementById('site-nav');
			if (!toggle || !nav) return;
			toggle.addEventListener('click', (e) => {
				e.stopPropagation();
				const isOpen = toggle.getAttribute('aria-expanded') === 'true';
				toggle.setAttribute('aria-expanded', String(!isOpen));
				toggle.setAttribute('aria-label', !isOpen ? 'Close menu' : 'Open menu');
				nav.classList.toggle('open', !isOpen);
			});
			nav.addEventListener('click', (e) => e.stopPropagation());
			window.addEventListener('resize', () => {
				if (window.innerWidth > 600) {
					toggle.setAttribute('aria-expanded','false');
					nav.classList.remove('open');
				}
			});
			document.addEventListener('click', (e) => {
				if (window.innerWidth <= 600 && nav.classList.contains('open')) {
					if (!nav.contains(e.target) && !toggle.contains(e.target)) {
						toggle.setAttribute('aria-expanded','false');
						nav.classList.remove('open');
					}
				}
			});
		})();

		window.addEventListener('storage', (ev) => {
			if (ev.key === 'md_cart' || ev.key === 'md_cart_sync') updateCartCount();
		});

		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', updateCartCount);
		} else updateCartCount();
	})();

	// Review carousel logic
	(function(){
		const reviews = [
			{
				text: "Great service and fast shipping. The part fit perfectly and was much cheaper than anywhere else. Highly recommended!",
				name: "Alex P.",
				date: "May 2024",
				avatar: "https://randomuser.me/api/portraits/men/32.jpg"
			},
			{
				text: "I was skeptical at first but the quality is top notch. Customer support was helpful and responsive.",
				name: "Maria L.",
				date: "April 2024",
				avatar: "https://randomuser.me/api/portraits/women/65.jpg"
			},
			{
				text: "Easy to find what I needed and checkout was a breeze. Will definitely shop here again.",
				name: "Chris D.",
				date: "March 2024",
				avatar: "https://randomuser.me/api/portraits/men/76.jpg"
			}
		];
		let idx = 0;
		const reviewContent = document.querySelector('.review-content');
		const leftBtn = document.querySelector('.review-arrow.left');
		const rightBtn = document.querySelector('.review-arrow.right');
		function renderReview(i) {
			const r = reviews[i];
			reviewContent.innerHTML = `
				<div class="review-text">"${r.text}"</div>
				<div class="review-person">
					<img class="review-avatar" src="${r.avatar}" alt="${r.name}">
					<div>
						<span class="review-name">${r.name}</span>
						<span class="review-date">${r.date}</span>
					</div>
				</div>
			`;
		}
		leftBtn.addEventListener('click', () => {
			idx = (idx + reviews.length - 1) % reviews.length;
			renderReview(idx);
		});
		rightBtn.addEventListener('click', () => {
			idx = (idx + 1) % reviews.length;
			renderReview(idx);
		});
		renderReview(idx);
	})();
</script>
</body>
</html>
